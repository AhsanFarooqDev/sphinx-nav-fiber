import{c as pe,j as t,s as h,a as b,F as w,T as D,r as c,u as W,N as X,y as me,d as ue,L as he,z as xe,A as fe}from"./index-fa42d664.js";import{Universe as ge}from"./index-443b5f5d.js";import{T as ye,b as B,v as L,C as we,c as be,d as je,e as ve,f as _e,g as Ce,h as ke,i as Se,j as Te,a as Ee}from"./index-a2a50e77.js";import{u as A,H as ze,C as Me}from"./index-315197ea.js";import{S as Ie}from"./three.module-723b330f.js";import{R as Pe,M as Be}from"./index-f03c4145.js";import"./TextareaAutosize-ff0d7a99.js";import"./index-b6080883.js";import"./ClipLoader-f95b7630.js";import"./Skeleton-1d8f662b.js";import"./Stack-d2117631.js";import"./isPlainObject-03dca9e3.js";import"./Typography-2a68eba0.js";import"./createSvgIcon-14e39a19.js";import"./index-321edff9.js";const $e={selectedEpisodeId:"",selectedEpisodeLink:"",selectedEpisode:null},Z=pe(e=>({...$e,setSelectedEpisodeId:o=>e({selectedEpisodeId:o}),setSelectedEpisodeLink:o=>e({selectedEpisodeLink:o}),setSelectedEpisode:o=>e({selectedEpisode:o})})),Re=e=>t.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 30 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M7.2998 2.55199C7.2998 1.51094 8.11675 0.666992 9.1245 0.666992H12.1299C13.1376 0.666992 13.9546 1.51094 13.9546 2.55199C13.9546 3.59305 13.1376 4.43699 12.1299 4.43699H9.1245C8.11675 4.43699 7.2998 3.59305 7.2998 2.55199Z",fill:"currentColor"}),t.jsx("path",{d:"M7.2998 25.449C7.2998 26.49 8.11675 27.334 9.1245 27.334H12.1299C13.1376 27.334 13.9546 26.49 13.9546 25.449C13.9546 24.4079 13.1376 23.564 12.1299 23.564H9.1245C8.11675 23.564 7.2998 24.4079 7.2998 25.449Z",fill:"currentColor"}),t.jsx("path",{d:"M2.79102 8.29613C2.79102 7.25508 3.60796 6.41113 4.61571 6.41113H12.1292C13.1369 6.41113 13.9539 7.25508 13.9539 8.29613C13.9539 9.33719 13.1369 10.1811 12.1292 10.1811H4.61571C3.60796 10.1811 2.79102 9.33719 2.79102 8.29613Z",fill:"currentColor"}),t.jsx("path",{d:"M2.79102 19.7039C2.79102 20.7449 3.60796 21.5889 4.61571 21.5889H12.1292C13.1369 21.5889 13.9539 20.7449 13.9539 19.7039C13.9539 18.6628 13.1369 17.8189 12.1292 17.8189H4.61571C3.60796 17.8189 2.79102 18.6628 2.79102 19.7039Z",fill:"currentColor"}),t.jsx("path",{d:"M0 14.094C0 13.0529 0.816945 12.209 1.8247 12.209H12.1289C13.1366 12.209 13.9536 13.0529 13.9536 14.094C13.9536 15.135 13.1366 15.979 12.1289 15.979H1.8247C0.816946 15.979 0 15.135 0 14.094Z",fill:"currentColor"}),t.jsx("path",{d:"M22.7002 25.448C22.7002 26.4891 21.8833 27.333 20.8755 27.333H17.8701C16.8624 27.333 16.0454 26.4891 16.0454 25.448C16.0454 24.407 16.8624 23.563 17.8701 23.563H20.8755C21.8832 23.563 22.7002 24.407 22.7002 25.448Z",fill:"currentColor"}),t.jsx("path",{d:"M22.7002 2.55199C22.7002 1.51094 21.8833 0.666992 20.8755 0.666992H17.8701C16.8624 0.666992 16.0454 1.51094 16.0454 2.55199C16.0454 3.59305 16.8624 4.43699 17.8701 4.43699H20.8755C21.8832 4.43699 22.7002 3.59305 22.7002 2.55199Z",fill:"currentColor"}),t.jsx("path",{d:"M27.209 19.7029C27.209 20.7439 26.392 21.5879 25.3843 21.5879H17.8708C16.8631 21.5879 16.0461 20.7439 16.0461 19.7029C16.0461 18.6618 16.8631 17.8179 17.8708 17.8179H25.3843C26.392 17.8179 27.209 18.6618 27.209 19.7029Z",fill:"currentColor"}),t.jsx("path",{d:"M27.209 8.29613C27.209 7.25508 26.392 6.41113 25.3843 6.41113H17.8708C16.8631 6.41113 16.0461 7.25508 16.0461 8.29613C16.0461 9.33719 16.8631 10.1811 17.8708 10.1811H25.3843C26.392 10.1811 27.209 9.33719 27.209 8.29613Z",fill:"currentColor"}),t.jsx("path",{d:"M30 14.093C30 13.052 29.1831 12.208 28.1753 12.208H17.8711C16.8634 12.208 16.0464 13.052 16.0464 14.093C16.0464 15.1341 16.8634 15.978 17.8711 15.978H28.1753C29.1831 15.978 30 15.1341 30 14.093Z",fill:"currentColor"})]}),He=()=>t.jsxs(Le,{children:[t.jsx(Ne,{children:t.jsx(De,{children:t.jsx(Re,{})})}),t.jsx(We,{children:"Graph Mindset"})]}),Le=h(w).attrs({align:"center",direction:"row",grow:1,justify:"flex-start"})`
  height: 64px;
  padding: 20px 23px;
  gap: 0px;
  z-index: 50;
  position: relative;
`,Ne=h(w)`
  align-items: center;
  justify-content: center;
  cursor: pointer;
`,De=h.div`
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    width: 30px;
    height: 27px;
    color: ${b.white};
  }
`,We=h(D)`
  width: 127px;
  height: 24px;
  color: ${b.white};
  font-family: Barlow;
  font-size: 22px;
  font-style: normal;
  font-weight: 700;
  line-height: 24px;
  letter-spacing: 0.22px;
  margin-left: 16px;
  white-space: nowrap;
`,Ae=e=>t.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 7 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M4.77978 6.00243L0.706705 1.92933C0.568239 1.79088 0.497405 1.61684 0.494205 1.40723C0.490989 1.19763 0.561822 1.02039 0.706705 0.875528C0.851572 0.730645 1.02721 0.658203 1.23361 0.658203C1.44001 0.658203 1.61564 0.730645 1.7605 0.875528L6.25473 5.36975C6.34833 5.46334 6.41436 5.56205 6.45281 5.6659C6.49127 5.76974 6.51051 5.88191 6.51051 6.00243C6.51051 6.12294 6.49127 6.23512 6.45281 6.33895C6.41436 6.4428 6.34833 6.54152 6.25473 6.6351L1.7605 11.1293C1.62205 11.2678 1.44802 11.3386 1.2384 11.3418C1.0288 11.345 0.851572 11.2742 0.706705 11.1293C0.561822 10.9845 0.48938 10.8088 0.48938 10.6024C0.48938 10.396 0.561822 10.2204 0.706705 10.0755L4.77978 6.00243Z",fill:"currentColor"})}),Ze=/^(https?:\/\/)/,Fe=/(www\.)?/,Ge=/[\w-]+(\.[\w-]+)*/,qe=/(?:\.[a-zA-Z0-9][a-zA-Z0-9-]{0,61})[a-zA-Z0-9](?:\.[a-zA-Z]{2,})/,Ue=/(\/[^\s?]*)?/,Ye=/(\?[^\s]*)?/,Oe=/(https?:\/\/)?(www\.)?youtube\.com\/watch\?v=([A-Za-z0-9_-]+)/,Xe=/(https?:\/\/)?(www\.)?youtube\.com\/live\/([A-Za-z0-9_-]+)/,Ve=/(https?:\/\/)?(www\.)?youtu\.be\/([A-Za-z0-9_-]+)/,Ke=/(https?:\/\/)?([A-Za-z0-9_-]+)\.mp3/,Je=new RegExp(`${Ze.source}${Fe.source}${Ge.source}${qe.source}?${Ue.source}${Ye.source}$`,"i"),Qe=e=>{try{if(!(e==null?void 0:e.match(Je)))return!1;const s=new URL(e).hostname;return s!=null&&s.startsWith("www.")?((s==null?void 0:s.match(/\./g))||[]).length>=2:((s==null?void 0:s.match(/\./g))||[]).length>=1}catch{return!1}},V=e=>Qe(e)?[Oe,Xe,Ve,Ke].some(n=>n.test(e)):!1,et=async e=>{const o="add_node",n={};n.media_url=e.source,n.content_type="audio_video";const s=await me.post(`/${o}`,JSON.stringify(n));if(s.error){const{message:i}=s.error;throw new Error(i)}return s},tt=()=>{const[e,o]=c.useState(""),[n,s]=c.useState(!1),[i,m]=c.useState(""),{setRunningProjectId:r}=W(d=>d),{setSelectedEpisodeId:l,setSelectedEpisodeLink:a}=Z(d=>d),x=d=>{const{value:j}=d.target;o(j),s(j!==""&&!V(j))},p=async()=>{if(V(e))try{const d=await et({source:e});d.data.project_id&&r(d.data.project_id),d.data.ref_id&&(l(d.data.ref_id),a(e))}catch(d){let j=X;if((d==null?void 0:d.status)===400){const v=await d.json();j=v.errorCode||(v==null?void 0:v.status)||X,v.data.ref_id&&(l(v.data.ref_id),a(e))}else d instanceof Error&&(j=d.message);m(String(j))}};return t.jsxs(ot,{children:[t.jsx(st,{children:"Ideas have shapes"}),t.jsxs(rt,{children:[t.jsx(nt,{error:n,onChange:x,onKeyDown:d=>d.key==="Enter"&&p(),placeholder:"Paste podcast or video link",value:e}),t.jsx(it,{error:n,onClick:n?void 0:p,children:t.jsx(Ae,{})})]}),i&&t.jsx("div",{children:i})]})},ot=h(w)`
  background: #16161de3;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  color: #fff;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-style: normal;
  font-weight: 700;
  line-height: 16px;
  font-family: 'Barlow';
  z-index: 40;
`,st=h(w)`
  color: ${b.white};
  font-family: Barlow;
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 40px;
  text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);
`,nt=h.input`
  width: 100%;
  max-width: 450px;
  padding: 12px 28px 12px 16px;
  border-radius: 100px;
  border: 1px solid ${e=>e.error?"red":b.DIVIDER_4};
  background: ${b.INPUT_BG};
  color: ${b.white};
  font-family: Barlow;
  font-size: 16px;

  &::placeholder {
    color: ${b.INPUT_PLACEHOLDER};
  }

  &:focus {
    outline: none;
    border-color: ${e=>e.error?"red":b.primaryBlue};
  }
`,rt=h.div`
  position: relative;
  width: 450px;
  display: flex;
  align-items: center;
`,it=h.div`
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: ${b.white};
  font-size: 20px;
  cursor: ${e=>e.error?"not-allowed":"pointer"};

  svg {
    width: 8px;
    height: 17px;
    color: ${b.GRAY6};
  }
`,I=[{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"1",node_type:"Clip",name:"Podcast"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"2",node_type:"Topic",name:"Bitcoin"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"3",node_type:"Topic",name:"Blockchain"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"4",node_type:"Topic",name:"Hard Money"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"5",node_type:"Topic",name:"Digital Currency"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"6",node_type:"Topic",name:"Government Control"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"7",node_type:"Topic",name:"Inflation"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"8",node_type:"Topic",name:"Public Network"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"9",node_type:"Topic",name:"Energy Consumption"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"10",node_type:"Topic",name:"Immutability"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"11",node_type:"Topic",name:"Scarcity"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"12",node_type:"Topic",name:"Decentralization"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"13",node_type:"Topic",name:"Investment Risks"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"14",node_type:"Topic",name:"Adoption"},{edge_count:0,x:0,y:0,z:0,label:"label",ref_id:"15",node_type:"Person",name:"Satoshi Nakamoto"}],F=[{ref_id:"1",edge_type:"Mentioned",target:"1",source:"2",start:7.68,end:19.619},{ref_id:"2",edge_type:"Mentioned",target:"1",source:"4",start:28.019,end:38.04},{ref_id:"3",edge_type:"Mentioned",target:"1",source:"3",start:50.82,end:56.52},{ref_id:"4",edge_type:"Mentioned",target:"1",source:"5",start:19.439,end:25.619},{ref_id:"5",edge_type:"Mentioned",target:"1",source:"6",start:34.619,end:43.02},{ref_id:"6",edge_type:"Mentioned",target:"1",source:"9",start:31.8,end:38.04},{ref_id:"7",edge_type:"Mentioned",target:"1",source:"10",start:56.52,end:60.48},{ref_id:"8",edge_type:"Mentioned",target:"1",source:"12",start:90.72,end:97.52},{ref_id:"9",edge_type:"Mentioned",target:"1",source:"13",start:126.44,end:133.48},{ref_id:"10",edge_type:"Mentioned",target:"1",source:"14",start:122.44,end:130.48}],N=F.filter(e=>e==null?void 0:e.start).map(e=>({source:e.source,start:e==null?void 0:e.start}));(I||[]).filter(e=>N.some(o=>o.source===e.ref_id)).map(e=>{const o=N.find(n=>e.ref_id===n.source);return{...e,start:(o==null?void 0:o.start)||0}}).filter(e=>e);const ee=F.flatMap(e=>{const{start:o,end:n}=e.properties??{};return o!==void 0&&n!==void 0?[o,n]:[0,0]}),K=Math.min(...ee),J=Math.max(...ee),Q=(e,o,n,s,i)=>s+(e-o)/(n-o)*(i-s),at=({type:e})=>{var r,l;const[o]=ue(a=>[a.normalizedSchemasByType]),n=(r=o[e])==null?void 0:r.primary_color,s=(l=o[e])==null?void 0:l.icon,m={iconStart:(s?`svg-icons/${s}.svg`:null)??"thing_badge.svg",color:n??b.THING};return t.jsx(ct,{...m,label:e})},ct=({iconStart:e,color:o,label:n})=>t.jsx(lt,{color:o,children:t.jsx("img",{alt:n,className:"badge__img",src:e})}),lt=h(w).attrs({direction:"row"})`
  cursor: pointer;
  background: ${({color:e})=>e};
  border-radius: 3px;
  overflow: hidden;
  justify-content: center;
  align-items: center;
  padding: 0 4px;

  .badge__img {
    width: 10px;
    height: 10px;
    object-fit: contain;
  }
`,dt=({duration:e,progress:o,markers:n})=>(console.log("s"),t.jsxs(mt,{children:[t.jsx(pt,{value:o,variant:"determinate"}),n.map(s=>{const i=((s==null?void 0:s.start)||0)/e*100,m=(s==null?void 0:s.node_type)||"";return t.jsx(ut,{style:{left:`${i}%`},children:t.jsx(ye,{content:`${(s==null?void 0:s.name)||""}|${s==null?void 0:s.start}`,children:t.jsx(at,{type:m})})},s==null?void 0:s.ref_id)})]})),pt=h(he)`
  && {
    height: 2px;
    background-color: ${b.white};
    color: blue;
    flex-grow: 1;

    .MuiLinearProgress-bar {
      background: ${b.GRAY6};
    }
  }
`,mt=h(w)`
  position: relative;
  flex: 1 1 100%;
`,ut=h.div`
  position: absolute;
  top: -4px; /* Adjust as needed to center above the progress bar */
  width: 8px;
  height: 8px;
  background-color: ${b.white};
  border-radius: 50%;
  transform: translateX(-50%); /* Center the marker horizontally */
  transform: translateX(-50%) translateY(-50%);
  top: 50%;
`,ht=({markers:e})=>{var p;const{isPlaying:o,setIsPlaying:n,playingTime:s,playingNode:i,duration:m}=B(d=>d),[r,l]=(p=i==null?void 0:i.properties)!=null&&p.timestamp?i.properties.timestamp.split("-").map(d=>L(d)):[0,m],a=(s-r)/(l-r)*100;return i?t.jsxs(xt,{children:[t.jsxs(ft,{children:[t.jsx(we,{}),t.jsx(gt,{"data-testid":"play-pause-button",onClick:d=>{n(!o),d.stopPropagation()},size:"small",children:o?t.jsx(be,{"data-testid":"pause-icon"}):t.jsx(je,{"data-testid":"play-icon"})}),t.jsx(ve,{})]}),t.jsx(dt,{duration:m,markers:e,progress:a}),!1]}):null},xt=h(w).attrs({direction:"row",align:"center",justify:"space-between"})`
  padding: 20px;
  margin: 20px;
  background: ${b.BG2};
  height: 96px;
  border-radius: 8px;
  box-sizing: border-box;
`,ft=h(w).attrs({direction:"row",align:"center",justify:"flex-start"})`
  width: 142px;
  height: 54px;
  background: ${b.BG1};
  border-radius: 40px;
  margin-right: 54px;
  color: ${b.white};
  font-size: 20px;
  padding: 12px;
  justify-content: space-between;
  box-sizing: border-box;
`,gt=h(_e)`
  && {
    font-size: 36px;
    padding: 2px;
    overflow: hidden;
  }
`,yt=(e,o,n)=>{const s=new Ie;return s.moveTo(-e/2+n,-o/2),s.lineTo(e/2-n,-o/2),s.quadraticCurveTo(e/2,-o/2,e/2,-o/2+n),s.lineTo(e/2,o/2-n),s.quadraticCurveTo(e/2,o/2,e/2-n,o/2),s.lineTo(-e/2+n,o/2),s.quadraticCurveTo(-e/2,o/2,-e/2,o/2-n),s.lineTo(-e/2,-o/2+n),s.quadraticCurveTo(-e/2,-o/2,-e/2+n,-o/2),s},wt=({width:e,height:o,radius:n,color:s})=>{console.log(e,o);const i=yt(e,o,n);return t.jsxs("mesh",{children:[t.jsx("shapeGeometry",{args:[i]}),t.jsx("meshBasicMaterial",{color:s,opacity:.9,transparent:!0})]})},bt=({name:e,url:o})=>t.jsxs(jt,{children:[o&&t.jsx("img",{alt:"",className:"image",src:o}),t.jsx("div",{className:"title",children:e}),t.jsx("div",{className:"action-btn",children:t.jsx(Ce,{})})]}),jt=h(w)`
  position: relative;
  padding: 14px;
  padding-right: 28px;
  flex: 1;
  width: 100%;
  box-sizing: border-box;

  .title {
    margin-top: 8px;
  }

  .image {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    margin-bottom: 8px;
    object-fit: cover;
  }

  .action-btn {
    top: 14px;
    right: 14px;
    color: ${b.GRAY6};
    position: absolute;
  }
`,vt=({width:e,height:o,position:n,url:s,onButtonClick:i,name:m,type:r,color:l})=>{const{camera:a,size:x}=A();console.info(s,r);const p=(v,E)=>{const u=a,f=u.right-u.left,g=u.top-u.bottom;return{pixelWidth:v/f*x.width,pixelHeight:E/g*x.height}},{pixelWidth:d,pixelHeight:j}=p(e,o);return t.jsxs("group",{position:n,children:[t.jsx(wt,{color:l,height:o,radius:1.5,width:e}),t.jsx(ze,{position:[-e/2,o/2,0],children:t.jsx(w,{onClick:()=>i(),style:{fontSize:"20px",color:"white",fontWeight:600,width:`${d}px`,height:`${j}px`,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",pointerEvents:"auto"},children:t.jsx(bt,{name:m,url:"logo.png"})})})]})},_t=185,Ct=()=>{const e=A(),{width:o}=e.viewport,{camera:n}=e;c.useEffect(()=>{const r=n,l=a=>{a.preventDefault(),a.ctrlKey?(r.zoom+=a.deltaY*-.01,r.zoom=Math.max(.5,Math.min(r.zoom,5))):r.position.x+=a.deltaX*.01,r.updateProjectionMatrix()};return window.addEventListener("wheel",l,{passive:!1}),()=>{window.removeEventListener("wheel",l)}},[n]);const s=0,i=97.52*10,m=c.useMemo(()=>F.filter(r=>{var l,a;return((l=r==null?void 0:r.properties)==null?void 0:l.start)&&((a=r==null?void 0:r.properties)==null?void 0:a.end)}).map(r=>{var x,p;const l=((x=r==null?void 0:r.properties)==null?void 0:x.start)||0,a=((p=r==null?void 0:r.properties)==null?void 0:p.end)||0;return{source:r.source,target:r.target,xStart:Q(l,K,J,s,i),xEnd:Q(a,K,J,s,i)}}),[s,i]);return t.jsxs(t.Fragment,{children:[I.map((r,l)=>{var x;return m.some(p=>p.source===I[l].ref_id)?(x=m.find(p=>p.source===I[l].ref_id))!=null&&x.xStart:l*35,null}),N.map(r=>{const l=I.find(p=>p.ref_id===r.source),a=r.start/_t*o,x=-5;return l?t.jsx(vt,{color:"red",height:10,name:l.name,onButtonClick:()=>null,position:[a,x,0],type:l.node_type,url:"logo.png",width:5},l.ref_id):null}),t.jsxs("mesh",{position:[-13,0,0],children:[t.jsx("circleGeometry",{args:[3,64]})," ",t.jsx("meshBasicMaterial",{color:"blue"})]})]})},kt=()=>{const[e,o]=c.useState(0),n=s=>{o(Number(s.target.value))};return t.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[t.jsx("div",{style:{position:"absolute",top:10,left:10,zIndex:10},children:t.jsx("input",{max:100,min:-100,onChange:n,step:1,type:"range",value:e})}),t.jsxs(Me,{orthographic:!0,children:[t.jsx(St,{x:e}),t.jsx(Ct,{}),t.jsx("gridHelper",{args:[100,100,"white","gray"]}),t.jsx("gridHelper",{args:[100,100,"white","gray"],rotation:[Math.PI/2,0,0]}),t.jsx("axesHelper",{args:[5]})]})]})},St=({x:e})=>{const{size:o,viewport:n,camera:s}=A(),i=50,m=o.width/o.height;console.log(m,o.width);const r=-i*m/2,l=i*m/2,a=i/2,x=-i/2;return c.useEffect(()=>{const p=s;p.left=r,p.right=l,p.top=a,p.bottom=x,p.position.x=e,p.updateProjectionMatrix()},[s,r,l,a,x,e]),c.useEffect(()=>{console.log("Viewport Width in World Units:",n.width)},[n.width]),null},Tt=(e,o)=>{let n=0,s=e.length-1;for(;n<=s;){const i=Math.floor((n+s)/2),m=e[i],{start:r,end:l}=m;if(o>=r&&o<=l)return m;o<r?s=i-1:n=i+1}return null},Et=({mediaUrl:e})=>{const o=c.useRef(null),n=c.useRef(null),[s,i]=c.useState(!1),[m,r]=c.useState(!1),[l,a]=c.useState(!1),[x,p]=c.useState("ready"),[d,j]=c.useState(!1),[v,E]=c.useState(""),[u,f]=c.useState(!1),g=ke(),{setActiveEdge:k}=Se(y=>y),{dataInitial:S}=W(y=>y);c.useEffect(()=>{const y="00:00:00-00:12:00",_=y==null?void 0:y.split("-")[0];E(_)},[g]);const{isPlaying:G,playingTime:q,setIsPlaying:$,setPlayingTime:T,setDuration:R,playingNode:z,volume:te,setHasError:oe,resetPlayer:U,isSeeking:H,setIsSeeking:Y}=B(y=>y);c.useEffect(()=>()=>U(),[U]),c.useEffect(()=>{z&&!d&&(T(0),R(0),j(!1),f(!1))},[z,T,R,j,d]),c.useEffect(()=>{H&&o.current&&(o.current.seekTo(q,"seconds"),Y(!1))},[q,H,Y]),c.useEffect(()=>{if(d&&v&&o.current&&!u){const y=L(v);o.current.seekTo(y,"seconds"),T(y),f(!0)}},[d,v,T,u]);const O=()=>{$(!G)},se=()=>{$(!0)},ne=()=>{$(!1)},re=()=>{oe(!0),p("error")},ie=c.useMemo(()=>((S==null?void 0:S.links.filter(C=>C==null?void 0:C.start))||[]).slice().sort((C,M)=>(C==null?void 0:C.start)-(M==null?void 0:M.start)),[S]),ae=y=>{if(!H){const _=y.playedSeconds;T(_);const C=Tt(ie,_);C&&k(C)}},ce=()=>{if(o.current){p("ready");const y=o.current.getDuration();if(R(y),v&&!u){const _=L(v);o.current.seekTo(_,"seconds"),T(_),f(!0)}}},P=()=>{r(!!document.fullscreenElement),document.removeEventListener("fullscreenchange",P)};c.useEffect(()=>()=>{document.removeEventListener("fullscreenchange",P)}),c.useEffect(()=>{const y=_=>{if(m){const C=window.screen.height,M=_.clientY,de=C-M;a(de<=50)}};return document.addEventListener("mousemove",y),()=>{document.removeEventListener("mousemove",y)}},[m,l]),c.useEffect(()=>{const y=_=>{m&&_.key==="Escape"?(_.preventDefault(),_.stopPropagation()):s&&_.key===" "&&(_.preventDefault(),O())};return document.addEventListener("fullscreenchange",P),document.addEventListener("keydown",y),()=>{document.removeEventListener("fullscreenchange",P),document.removeEventListener("keydown",y)}});const le=()=>{O()};return e?t.jsxs(zt,{ref:n,onBlur:()=>i(!1),onFocus:()=>i(!0),tabIndex:0,children:[t.jsx(Mt,{isFullScreen:m,children:t.jsx(Te,{size:120,src:(z==null?void 0:z.image_url)||"",type:"clip"})}),t.jsx(Pt,{isFullScreen:m,onClick:le,children:t.jsx(Pe,{ref:o,controls:!0,height:m?window.screen.height:"219px",onBuffer:()=>p("buffering"),onBufferEnd:()=>p("ready"),onError:re,onPause:ne,onPlay:se,onProgress:ae,onReady:ce,playing:G,url:e||"",volume:te,width:"100%"})}),x==="error"?t.jsx(It,{className:"error-wrapper",children:"Error happened, please try later"}):null]}):null},zt=h(w)`
  border-bottom: 1px solid rgba(0, 0, 0, 0.25);
  background: rgba(0, 0, 0, 0.2);
  position: relative;
  overflow: hidden;
  height: auto;
  &:focus {
    outline: none;
  }
`,Mt=h(w)`
  position: absolute;
  top: ${e=>e.isFullScreen?"38%":"18%"};
  left: 50%;
  transform: translateX(-50%);
  z-index: -1;
`,It=h(w)`
  height: 60px;
  padding: 12px 16px;
  color: ${b.primaryRed};
`,Pt=h.div`
  margin: ${e=>e.isFullScreen?"80px auto":"0"};
  width: 100%;
  cursor: pointer;
`,Bt=c.memo(Et),$t=[{text:"when money is easy to make Society",timestamp:179},{text:"begins to break",timestamp:2760},{text:"well one solution is Bitcoin",timestamp:7680},{text:"back in 2008 I became fed up with",timestamp:11219},{text:"government money with the corruption the",timestamp:13620},{text:"manipulation so I created a digital",timestamp:15599},{text:"currency digital money that can be sent",timestamp:17760},{text:"directly from one person to another",timestamp:19619},{text:"without any bank or government involved",timestamp:21119},{text:"and the best part it's hard money",timestamp:23400},{text:"Bitcoin is very hard to make more of",timestamp:28019},{text:"each new coin gets added to the supply",timestamp:29939},{text:"only after a computer works very hard to",timestamp:31800},{text:"solve a math problem where there's no",timestamp:34200},{text:"shortcut and solving it costs a lot of",timestamp:35880},{text:"energy and time",timestamp:38040},{text:"okay but if it's on a computer can't I",timestamp:40559},{text:"just copy and paste",timestamp:43020},{text:"not with Bitcoin you",timestamp:46559},{text:"have public record of every Bitcoin ever",timestamp:48600},{text:"created it's called the blockchain it's",timestamp:50820},{text:"like a puzzle and each Bitcoin has its",timestamp:54300},{text:"own unique shape and because everyone",timestamp:56520},{text:"has a copy of the public record if",timestamp:58260},{text:"someone tries to fake a Bitcoin",timestamp:60480},{text:"it won't fit the puzzle and will be",timestamp:65099},{text:"rejected by the network before anyone",timestamp:67140},{text:"can use it",timestamp:69060},{text:"that's why Bitcoin is so safe from",timestamp:70860},{text:"criminals and the government you said",timestamp:72960},{text:"criminals twice",timestamp:75420},{text:"dollars which can be printed endlessly",timestamp:77439},{text:"there will only ever be 21 million",timestamp:79720},{text:"Bitcoin it's almost impossible to",timestamp:81720},{text:"inflate the only way to get it is to",timestamp:83759},{text:"earn it or buy it from someone who has",timestamp:85619},{text:"no offense but if you",timestamp:89820},{text:"if you coin couldn't you manipulate it",timestamp:91320},{text:"just like the government I don't control",timestamp:92880},{text:"it no one person does it's controlled by",timestamp:94619},{text:"a public network of Bitcoin users that",timestamp:97619},{text:"anyone can join so if someone wanted to",timestamp:99720},{text:"change something in bitcoin's code they",timestamp:101939},{text:"would need to get the majority of the",timestamp:103920},{text:"millions of Bitcoin users to agree to it",timestamp:104659},{text:"all the change doesn't happen and when",timestamp:104752},{text:"has the majority of us agreed on",timestamp:104860},{text:"anything",timestamp:105360},{text:"touche wow I didn't know made up money",timestamp:105720},{text:"could make so much sense today millions",timestamp:105960},{text:"of people send Bitcoin instantly and",timestamp:106180},{text:"cheaply to each other around the world",timestamp:106399},{text:"without any bank or government involved",timestamp:106620},{text:"and because Bitcoin is hard money you",timestamp:106859},{text:"can't just print more of the more people",timestamp:107360},{text:"who use it the more valuable it becomes",timestamp:107960},{text:"Emily if we take Lyle's Bitcoin we could",timestamp:108640},{text:"be rich I could pay for college entirely",timestamp:109040},{text:"you could Outsource your movie and pay",timestamp:109440},{text:"to have your name in the credits slow",timestamp:109840},{text:"down I'm not saying that Bitcoin will",timestamp:110240},{text:"make you rich quick or even at all right",timestamp:110640},{text:"now only about one percent of the world",timestamp:110780},{text:"owns Bitcoin and because it's still",timestamp:111280},{text:"being adopted some days it goes up and",timestamp:111580},{text:"even down also Investments or",timestamp:111820},{text:"potentially lucrative can be risky",timestamp:112380},{text:"oh I think I get it good money should be",timestamp:112879},{text:"easy to use but hard to create and",timestamp:113459},{text:"because Bitcoin is digital it's fast and",timestamp:113800},{text:"cheap to use and the blockchain makes it",timestamp:113900},{text:"hard to inflate thanks Mr Satoshi",timestamp:114379},{text:"what Mr Satoshi",timestamp:114819},{text:"gone or was he Aaron even here",timestamp:115340}],Rt=()=>{const e=$t,{playingTime:o}=B(n=>n);return t.jsxs(Ht,{children:[t.jsxs(w,{className:"heading",children:["Transcript (",o,")"]}),t.jsx(Lt,{direction:"row",children:e.map(n=>t.jsx("span",{children:n.text},`${n.text}-${n.timestamp}`))})]})},Ht=h(w)`
  .heading {
    font-weight: 700;
    font-size: 12px;
  }
  color: ${b.white};
  background: ${b.BG1};
  border-radius: 8px;
  padding: 24px;
  overflow: scroll;
  flex: 1 1 100%;
`,Lt=h(w)`
  flex-wrap: wrap;
  flex: 1 1 100%;
`,Nt=()=>{const{selectedEpisodeLink:e,selectedEpisode:o}=Z(n=>n);return t.jsxs(Dt,{align:"stretch",basis:"100%",grow:1,shrink:1,children:[t.jsxs(Zt,{children:[(o==null?void 0:o.node_type)&&t.jsx(Wt,{children:o==null?void 0:o.node_type}),(o==null?void 0:o.name)&&t.jsx(At,{children:o==null?void 0:o.name}),e&&t.jsx(Bt,{mediaUrl:e})]}),t.jsx(Rt,{})]})},Dt=h(w)(({theme:e})=>({position:"relative",display:"flex",padding:"20px",background:"transparent",width:"100%",[e.breakpoints.up("sm")]:{width:Be}})),Wt=h(D)`
  font-family: Inter;
  font-size: 20px;
  font-weight: Bold;
  line-height: 24.2px;
  overflow-wrap: break-word;
  white-space: normal;
  word-break: break-word;
  margin-right: 10px;
`,At=h(D)`
  font-family: Inter;
  margin-top: 20px;
  font-size: 14px;
  font-weight: 500;
  line-height: 16.94px;
`,Zt=h(w)(({theme:e})=>({width:"100%",margin:"16px auto",zIndex:29,[e.breakpoints.up("sm")]:{width:"390px"}})),ro=()=>{const{addNewNode:e,isFetching:o,runningProjectId:n,dataInitial:s}=W(u=>u),[i,m]=c.useState(!1),{selectedEpisodeId:r,setSelectedEpisode:l}=Z(u=>u),a=Ee(),x=c.useRef(null),p=c.useRef(null),{setPlayingNode:d}=B(u=>u),j=c.useCallback(u=>{o||(x.current||(x.current={nodes:[],edges:[]}),u.edges&&x.current.edges.push(...u.edges),u.nodes&&x.current.nodes.push(...u.nodes),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{if(x.current){const{nodes:f,edges:g}=x.current,k={nodes:f,edges:g};x.current={nodes:[],edges:[]},e(k)}},3e3))},[e,o]),v=c.useCallback(u=>{console.log(u,"uuuuuupdate")},[]);c.useEffect(()=>{r&&(async()=>{try{const f=await xe(r,0,50);f&&(f.nodes=f==null?void 0:f.nodes.map(g=>({...g,node_type:"Topic"})),j(f))}catch(f){console.error(f)}})()},[r,j]),c.useEffect(()=>{r&&(async()=>{try{const f=await fe(r);f&&(d(f),l(f))}catch(f){console.error(f)}})()},[r,d,l]),c.useEffect(()=>(a&&(a.on("new_node_created",j),a.on("node_updated",v)),()=>{a&&a.off()}),[a,v,j]),c.useEffect(()=>{if(n)try{a==null||a.emit("update_project_id",{id:n})}catch(u){console.error(u)}},[n,a]);const E=c.useMemo(()=>{if(s){const u=s.links.filter(g=>g==null?void 0:g.start).map(g=>({source:g.source,start:g==null?void 0:g.start}));return s.nodes.filter(g=>s.links.some(k=>k.source===g.ref_id)).map(g=>{const k=u.find(S=>g.ref_id===S.source);return{...g,start:(k==null?void 0:k.start)||0}}).filter(g=>g)}return[]},[s]);return t.jsx(w,{direction:"row",style:{height:"100%"},children:r?t.jsxs(t.Fragment,{children:[t.jsxs(w,{children:[t.jsx(w,{onClick:()=>m(!i),children:t.jsx(He,{})}),t.jsx(Nt,{})]}),t.jsxs(w,{basis:"100%",grow:1,shrink:1,children:[t.jsx(w,{basis:"100%",grow:1,shrink:1,children:i?t.jsx(kt,{}):t.jsx(ge,{})}),t.jsx(ht,{markers:E})]})]}):t.jsx(tt,{})})};export{ro as MindSet};
